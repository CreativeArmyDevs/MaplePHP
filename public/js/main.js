(()=>{var Ct=Object.defineProperty;var jt=(o,t,e)=>t in o?Ct(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var ut=(o,t,e)=>(jt(o,typeof t!="symbol"?t+"":t,e),e),st=(o,t,e)=>{if(!t.has(o))throw TypeError("Cannot "+e)};var a=(o,t,e)=>(st(o,t,"read from private field"),e?e.call(o):t.get(o)),u=(o,t,e)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,e)},d=(o,t,e,i)=>(st(o,t,"write to private field"),i?i.call(o,e):t.set(o,e),e);var w=(o,t,e)=>(st(o,t,"access private method"),e);var p={extend:function(o,t){return Object.assign(o,t)},each:function(o,t){let e=0;if(o&&typeof o=="object")for(let[i,n]of Object.entries(o)){let r=t(i,n,e);if(r!==void 0)return r;e++}return this},isCollection:function(o){return HTMLCollection.prototype.isPrototypeOf(o)||NodeList.prototype.isPrototypeOf(o)},isArray:function(o){return typeof o!="object"?!1:Array.isArray(o)},inArray:function(o,t){return typeof t!="object"?!1:t.includes(o)},isEmptyObject(o){return Object.keys(o).length===0},count:function(o){return this.isArray(o)?o.length:0},trim:function(o){return o.trim()},toNum:function(o,t){return o=t?parseFloat(o):parseInt(o),Number.isNaN(o)?0:o},round:function(o,t){typeof t!="number"&&(t=0);let e=Math.pow(10,t);return Math.round(o*e)/e},clone:function(o){return JSON.parse(JSON.stringify(o))},ajax:function(o){let t={method:"GET",url:"",data:null,body:null,dataType:"json",headers:{},statusCode:{}};p.extend(t,o),t.data=t.data!==null?"?"+new URLSearchParams(t.data):"",t.headers.Accept||(t.headers.Accept=t.dataType==="json"?"application/json":"text/html");let e={},i,n=fetch(t.url+t.data,t).then(function(r){return e=r,r.ok?t.headers.Accept==="application/json"?r.json():r.text():Promise.reject(r)});return{done:function(r){return n.then(function(s){typeof i=="function"&&(r=i),typeof r=="function"&&r.apply(this,[s,e.status,s])}),this},fail:function(r){return n.catch(function(s){if(typeof t.statusCode=="object"){let l=null;typeof t.statusCode[s.status]=="string"?l=t.statusCode[s.status]:typeof t.statusCode[s.status]=="function"&&(l=t.statusCode[s.status].call(this,s)),l!==null&&typeof l=="string"&&!s.message&&(s.message=l)}typeof i=="function"&&(r=i),typeof r=="function"&&r.apply(this,[s,s.status])}),this},always:function(r){return i=r,n.then(this.done).catch(this.fail),this}}}},W=function(o){return W.obj={init:function(t){return this.elem=o,this.selector=this._selector(),this.domStyles={},this.bind={},this.selector&&(this.length=this.selector.length),this},_selector:function(){if(this.elem===null)return null;if(typeof this.elem=="object"&&typeof this.elem.isSelf=="function")return this.elem.selector;let t=this.qrsel(this.elem,document);return t!==null?t:HTMLCollection.prototype.isPrototypeOf(this.elem)||NodeList.prototype.isPrototypeOf(this.elem)?(this.elem=Array.from(this.elem),this.elem):Array(this.elem)},isStratoxDom:function(){return!0},qrsel:function(t,e,i){if(typeof t=="string"){if(t.indexOf("<")===0)return this.setTextSelector(t),Array(this.createHTML(t));{let n=t.split(":");if(!i&&n.length===1&&t.indexOf("#")===0){let r=e.getElementById(t.substring(1));return Array(r)}else{if(n.length===2&&(n[1]==="first"&&(n[1]="first-child"),n[1]==="last"&&(n[1]="last-child"),n[1]==="input")){let r=e.elements;return r||(r=e.querySelectorAll("input, select, checkbox, textarea")),r}return t=n.join(":"),e.querySelectorAll(t)}}}return null},data:function(t,e){let i=this.get();return e===void 0?i.dataset[t]:(i.dataset[t]=e,this)},removeData:function(t){delete this.get().dataset[t]},exist:function(){return!!this.get()},attr:function(t,e){let i=this.get();return e===void 0?typeof t=="object"?(p.each(t,function(n,r){i.setAttribute(n,r)}),this):i.getAttribute(t):(i.setAttribute(t,e),this)},removeAttr:function(t){return this.get().removeAttribute(t),this},css:function(t,e){let i=this;return this.each(function(n){if(typeof t=="object"){let r="";i.domElem(n,"waDomStyles",t);for(let[s,l]of Object.entries(n.waDomStyles))r+=s+":"+l+";";n.style.cssText=r}else i.domElem(n,"waDomStyles",t,e),n.style[t]=e}),this},hasClass:function(t){return this.get().classList.contains(t)},addClass:function(t){let e=this;return this.each(function(i){if(i){let n=t.split(" ");for(let s=0;s<n.length;s++){let l=p.trim(n[s]);e.domElem(i,"waDomClasses",l,l)}let r=Object.keys(i.waDomClasses);i.classList.add(...r)}}),this},removeClass:function(t){let e=this;return this.each(function(i){if(i){let n=t.split(" "),r=Array();for(let s=0;s<n.length;s++){let l=p.trim(n[s]);r.push(l),i.waDomClasses&&typeof i.waDomClasses[l]=="string"&&delete i.waDomClasses[l]}r.length>0&&i.classList.remove(...r)}}),this},domElem:function(t,e,i,n){if(typeof t[e]!="object"&&(t[e]={}),n)t[e][i]=n;else return p.extend(t[e],i)},hide:function(){return this.css("display","none"),this},remove:function(){return this.each(function(t){t&&t.remove()}),this},children:function(){return f(this.get(0).parentElement.children)},siblings:function(){let t=this.get(0),e=t.parentElement.children,i=Array();return t.waCarrot=!0,p.each(e,function(n,r){r.waCarrot!==!0?i.push(r):delete r.waCarrot}),this.selector=i,this},parent:function(){return f(this.get(0).parentElement)},first:function(){return f(this.get(0))},last:function(){let t=this.selector.length-1;return f(this.get(t))},next:function(t){return f(this.get(t).nextElementSibling)},prev:function(t){return f(this.get(t).previousElementSibling)},eq:function(t){let e=p.toNum(t);return this.selector&&this.selector[0]&&this.selector[0][0]?f(this.selector[0][t]):f(this.selector[t])},getLength:function(){return this.selector.length},index:function(t){let e=this.get();return t?(typeof t=="string"&&(t=$(t).get(0)),Array.prototype.indexOf.call(e,t.get(0))):Array.from(e.parentElement.children).indexOf(e)},find:function(t){return f(this.qrsel(t,this.get(0),!0))},closest:function(t){let e=this.get(0).closest(t);return f(e)},get:function(t){let e=p.toNum(t);return this.selector[e]??this.selector},ready:function(t){return this.get(0).addEventListener("DOMContentLoaded",t),this},each:function(t){let e=0,i=this;return i.selector&&i.selector.forEach(function(n){typeof t=="function"&&t.apply(n,[n,i.selector,e]),e++}),this},on:function(...t){let e=this,[i,...n]=t,r,s={},l=function(y){},c=i.split(".");return p.each(n,function(y,E){typeof E=="string"&&(r=E),typeof E=="object"&&(s=E),typeof E=="function"&&(l=function(b){let T=r&&typeof b?.target?.closest=="function"?b.target.closest(r):b.target;T&&(b.data===void 0&&(b.data=s),E.apply(T,[b,T]))})}),typeof r!="string"&&typeof this.elem=="string"&&(r=this.elem),e.each(function(y){y&&(y.addEventListener(c[0]??i,l),y.off=Object.assign({[i]:{[r]:()=>y.removeEventListener(c[0]??i,l)}},{}))}),this},off:function(t,e){this.each(function(i){typeof i?.off=="object"&&(!t||i?.off?.[t])&&p.each(i.off,function(n,r){typeof r=="object"&&(!e||i?.off?.[t]?.[e])&&p.each(r,function(s,l){l()})})})},click:function(t){return this.on("click",t)},trigger:function(t){return typeof t!="string"?(console.error("The trigger argument is expected to be a string."),!1):this.each(function(e){if(e){let i=new Event(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(i)}})},scroll:function(t){return this.on("scroll",t)},resize:function(t){return this.on("resize",t)},focus:function(t){return typeof t=="function"?this.on("focus",t):(this.each(function(e){e&&e[0]?e[0].focus():e&&e.focus()}),this)},blur:function(t){return typeof t=="function"?this.on("blur",t):(this.each(function(e){e&&e[0]?e[0].blur():e&&e.blur()}),this)},keydown:function(t){return this.on("keydown",t)},keyup:function(t){return this.on("keydown",t)},scrollTop:function(t){if(t===void 0)return this.get().scrollY;let e=p.toNum(t,!0);return this.scrollTo(0,t),t},scrollTo:function(t,e){return t=p.toNum(t,!0),e=p.toNum(e,!0),this.get().scrollTo(t,e),this},width:function(){let t=this.get(),e=parseFloat(t.innerWidth),i=parseFloat(t.offsetWidth);return Number.isNaN(e)?Number.isNaN(i)?0:i:e},height:function(){let t=this.get(),e=parseFloat(t.innerHeight),i=parseFloat(t.offsetHeight);return Number.isNaN(e)?Number.isNaN(i)?0:i:e},innerWidth:function(){return this.width()},innerHeight:function(){return this.height()},animate:function(t,e,i,n){let r=this;return typeof n!="string"&&(n="cubic-bezier(0.455, 0.030, 0.515, 0.955)"),e=p.toNum(e),e>0&&(t.transition="all "+e+"ms "+n),this.css(t),typeof i=="function"&&setTimeout(function(s){e>0&&r.css("transition",""),i(s)},e),this},setTextSelector:function(t){return this.textSelector=t,this},createHTML:function(t){var e=document.createElement("div");return e.innerHTML=p.trim(t),e.firstChild},append:function(t){let e;return this.each(function(i){i.insertAdjacentHTML("beforeend",t),e=i}),f(e.lastChild)},prepend:function(t){let e;return this.each(function(i){i.insertAdjacentHTML("afterbegin",t),e=i}),f(e.firstChild)},appendTo:function(t){return f(t).append(this.parent().html())},prependTo:function(t){return f(t).prepend(this.parent().html())},before:function(t){let e;return this.each(function(i){i.insertAdjacentHTML("beforebegin",t),e=i}),f(e).prev()},after:function(t){let e;return this.each(function(i){i.insertAdjacentHTML("afterend",t),e=i}),f(e).next()},insertBefore:function(t){return f(t).before(this.textSelector)},insertAfter:function(t){return f(t).after(this.textSelector)},replaceWith:function(t){let e=this;if(typeof t=="function"){let i;return this.each(function(n){let r=t.apply(e,[n]);i=e.qrsel(r),i=i[0],n.replaceWith(i)}),f(i)}else this.each(function(i){i&&(i.outerHTML=t)});return e},html:function(t){if(this.selector){if(t===void 0)return this.get().innerHTML;this.each(function(e){e&&(this.innerHTML=t)})}return this},empty:function(){return this.each(function(t){t&&(t.textContent="")}),this},text:function(t){if(this.selector){if(t===void 0)return this.get().textContent;this.each(function(e){e&&(e.textContent=t)})}return this},val:function(t){return t===void 0?this.get().value:(this.each(function(e){e.value=t}),this)}},W.obj.init(),W.obj},f=p.extend(W,p);var R,L,H,K,ot=class{constructor(){u(this,H);u(this,R,{})}static open(t,...e){return a(this,L)||d(this,L,new ot),typeof t=="string"?a(this,L)[t](...e):a(this,L)}has(t){return w(this,H,K).call(this,t)!==!1}isContainer(t){return this.has(t)&&!this.isFactory(t)}isFactory(t){return typeof w(this,H,K).call(this,t)=="function"}get(t,...e){let i;if(i=w(this,H,K).call(this,t))return this.isFactory(t)?i.apply(this,e):i;throw new Error("Tring to get a container ("+t+") that does not exists")}set(t,e,i){typeof i!="boolean"&&(i=!1);let n;if(!i&&this.has(t))throw n=this.isFactory(t)?"factory":"container",new Error("The "+n+" ("+t+") already defined. Set argument 3 to true to overwrite, with caution; it may remove key functionalities.");return a(this,R)[t]=e,this}setFactory(t,e,i){if(typeof i!="boolean"&&(i=!1),!i&&this.has(t))throw this.isFactory(t)?new Error("The factory ("+t+") has already been defined. If you want to overwrite the factory then set overwrite argument to true."):new Error("("+t+") Has already been defined, but has been defined as a container and not factory. If you want to overwrite the container as factory then set overwrite argument to true.");return a(this,R)[t]=e,this}},G=ot;R=new WeakMap,L=new WeakMap,H=new WeakSet,K=function(t){return a(this,R)[t]??!1},u(G,L,void 0);var Y=class{constructor(t,e,i,n){this.json=t,this.value="",this.label="",this.description="",this.values=null,this.name="",this.nameJoin="",this.nameSplit=Array(),this.index=0,this.key=e,this.fields={},this.attr={},this.config={},this.configList={},this.settings=f.extend({xss:!0},i??{}),this.containerInst=n}container(t){let e="",i="";return(this.getValidation("length",0)>0||this.getValidation("hasLength",1)>0)&&(e="*"),i='<div id="'+this.getFieldID()+'" class="mb-20 field-'+this.nameJoin+'" data-index="'+this.index+'">',this.label&&(i+="<label>"+this.label+e+'<div class="message hide"></div></label>'),this.description&&(i+='<div class="description legend">'+this.description+"</div>"),i+=t(),i+="</div>",i}input(t){typeof t!="object"&&(t={});let e="",i=f.extend({type:"text",name:this.name,value:this.value,"data-index":this.index},t),n=typeof this.attr.type=="string"?this.attr.type:null,r=this.getAttr(i);return n==="password"&&(e+='<div class="relative">',e+='<a class="abs right block middle over-1 pad wa-show-password-btn" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="17" cy="15" r="1"/><circle cx="16" cy="16" r="6"/><path d="M2 16S7 6 16 6s14 10 14 10-5 10-14 10S2 16 2 16Z"/></svg></a>'),e+="<input"+r+">",n==="password"&&(e+="</div>"),e}text(){let t=this;return this.container(function(){return t.input()})}password(){let t=this;return this.container(function(){return t.input({type:"password"})})}date(){let t=this;return this.container(function(){return t.input({type:"date"})})}datetime(){let t=this;return this.container(function(){return t.input({type:"datetime-local"})})}hidden(){return this.input({type:"hidden"})}textarea(){let t=this,e=this.getAttr({name:this.name,"data-index":this.index});return this.container(function(){return"<textarea"+e+">"+t.value+"</textarea>"})}select(){let t=this,e=this.attr&&this.attr.multiple?this.name+"[]":this.name,i=this.getAttr({name:e,"data-index":this.index});return this.container(function(){let n="<select"+i+' autocomplete="off">';if(typeof t.data.items=="object")for(let[r,s]of Object.entries(t.data.items)){let l=t.isChecked(r)?' selected="selected"':"";n+='<option value="'+r+'"'+l+">"+s+"</option>"}else console.warn("Object items parameter is missing.");return n+="</select>",n})}radio(){let t=this,e=this.getAttr({type:"radio",name:this.name,"data-index":this.index});return this.container(function(){let i="";if(typeof t.data.items=="object")for(let[n,r]of Object.entries(t.data.items)){let s=t.isChecked(n)?' checked="checked"':"";i+='<label class="radio item small"><input'+e+' value="'+n+'"'+s+'><span class="title">'+r+"</span></label>"}else console.warn("Object items parameter is missing.");return i})}checkbox(){let t=this,e=Object.keys(t.data.items).length,i=this.getAttr({type:"checkbox",name:e>1?this.name+"[]":this.name,"data-index":this.index});return this.container(function(){let n="";if(typeof t.data.items=="object")for(let[r,s]of Object.entries(t.data.items)){let l=t.isChecked(r)?' checked="checked"':"";n+='<label class="checkbox item small"><input'+i+' value="'+r+'"'+l+'><span class="title">'+s+"</span></label>"}else console.warn("Object items parameter is missing.");return n})}submit(t){let e=this,i=f.extend({type:"submit",name:this.name,value:this.value},t);return"<input"+this.getAttr(i)+">"}group(){let t="";return t+='<div class="mb-20 wa-advanced-grouped-field">',this.groupFactory(function(e,i){t+=e},!0),t+="</div>",t}};var q,U,B,P,at,Z,ct,Q,dt,X,pt,_=class extends Y{constructor(){super(...arguments);u(this,P);u(this,Z);u(this,Q);u(this,X);u(this,U,{});u(this,B,!1)}static setComponent(e,i){if(typeof i!="function")throw new Error("The argument 2 in @prepareView has to be a callable");a(this,q)[e]=i}getComponent(e){return a(_,q)[e]?a(_,q)[e]:!1}hasComponent(e){return typeof this[e]=="function"||this.getComponent(e)}getAttr(e){typeof e!="object"&&(e={});let i="",n=f.extend(e,this.attr);for(let[r,s]of Object.entries(n))i+=" "+r+'="'+s+'"';return i}setValues(e){return d(this,U,e),this}isIterable(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}isChecked(e){return f.isArray(this.value)?f.inArray(e,this.value):this.value==e}getFieldID(){return"wa-fi-"+this.key+"-"+this.index}hasGroupEvents(){return a(this,B)}groupFactory(e,i){d(this,B,!0);let n="",r={},s=this,l=0,c=s.nameJoin,y=f.extend({},s.fields),E=this.getValueLength(1),b=this.config;return f.isArray(this.value)||(this.value=Array("")),f.each(this.value,function(T,bt){let S="",rt=s.index,wt=b.nestedNames!==void 0&&b.nestedNames===!0;b.controls!==void 0&&b.controls===!0&&(S+='<div class="group holder relative card-1 border" data-length="'+E+'">',S+='<a class="wa-field-group-delete-btn pad form-group-icon abs right top over-2" data-name="'+c+'" data-key="'+s.key+'" data-index="'+rt+'" data-position="'+T+'" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"><path d="M2 30 L30 2 M30 30 L2 2" /></svg></a>',S+='<a class="wa-field-group-btn form-group-icon before abs middle top over-2" data-name="'+c+'" data-key="'+s.key+'" data-index="'+rt+'" data-position="'+T+'" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"><path d="M16 2 L16 30 M2 16 L30 16" /></svg></a>'),f.each(y,function(lt,vt){var ht;let xt=wt?c+","+l+","+lt:lt;r[xt]=vt,S+=w(ht=s,P,at).call(ht,r,!1),r={}}),l++,b.controls!==void 0&&b.controls===!0&&(S+='<a class="wa-field-group-btn form-group-icon after abs middle bottom over-2" data-name="'+c+'" data-key="'+s.key+'" data-index="'+rt+'" data-position="'+T+'" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"><path d="M16 2 L16 30 M2 16 L30 16" /></a>',S+="</div>"),n+=e(S,bt)}),n}get(){return w(this,P,at).call(this,this.json)}getValidateItem(e){return this.data&&this.data.validate&&this.data.validate[e]?this.data.validate[e]:!1}getValidation(e,i){let n;return(n=this.getValidateItem(e))&&n[i]!==void 0?n[i]:!1}getValueLength(e){let i=0;return this.value&&f.isArray(this.value)&&(i=this.value.length),typeof e=="number"&&i<=e&&(i=e),i}},D=_;q=new WeakMap,U=new WeakMap,B=new WeakMap,P=new WeakSet,at=function(e,i){let n="";if(e)for(let[r,s]of Object.entries(e))this.data=s,this.name=typeof this.data.name=="string"?this.data.name:r,n+=w(this,Z,ct).call(this,i);return n},Z=new WeakSet,ct=function(e){this.value=typeof this.data.value=="string"?this.data.value:"",this.label=typeof this.data.label=="string"?this.data.label:"",this.description=typeof this.data.description=="string"?this.data.description:"",this.attr=typeof this.data.attr=="object"?this.data.attr:{},this.fields=typeof this.data.fields=="object"?this.data.fields:{},this.config=typeof this.data.config=="object"?this.data.config:{},f.extend(this.configList,this.config),w(this,X,pt).call(this),this.attr["data-name"]=this.nameJoin;let i=w(this,Q,dt).call(this),n,r,s;if(typeof this[this.data.type]=="function"||(r=this.getComponent(this.data.type)))return typeof r=="function"?n=r.apply(this.containerInst.get("view"),[this.data.data??{},this.containerInst,f,this]):n=this[this.data.type](),this.index++,n||"";this.containerInst.get("view").observer().stop(),console.error('The component/view named "'+this.data.type+'" does not exist.')},Q=new WeakSet,dt=function(){this.values&&d(this,U,this.values);let e=this,i=a(this,U),n=!1,r,s=this.nameSplit,l=s.length-1,c=s[l];i||(i={});for(let y=0;y<l;y++)r=s[y],i[r]!==void 0&&(i=i[r]);return i[c]!==void 0?this.value=i[c]:Object.entries(this.fields).length>0?i[c]=[{}]:(typeof i[c]!="object"&&(i={}),i[c]="",this.value||(this.value="")),i},X=new WeakSet,pt=function(){this.nameJoin=this.name;let e=this.name.split(","),i="";if(this.nameSplit=this.name.split(","),e.length>1){i=e.shift();for(let n=0;n<e.length;n++)i+="["+e[n]+"]";this.name=i}},u(D,q,{});var tt=class{#t={};#e={};#i=[];constructor(t){typeof t=="object"&&(this.#t=t)}set(t){let e,i=this;typeof t=="function"?(e=t(i.#e),f.extend(i.#e,e)):f.extend(i.#e,t)}factory(t){return this.#i.push(t),this}listener(){let t=this;return this.#e=new Proxy(this.#t,{set:function(e,i,n){return e[i]=n,t.notify(),!0}}),this}notify(){let t=this;f.each(this.#i,function(e,i){i(t.#t)})}stop(){this.#t={},this.#e={},this.#i=[]}};var v=class{#t="";#e;type="";label="";description="";name="";attr={};config={};fields={};items={};value="";data={};constructor(t){if(typeof t!="string"&&typeof t!="number")throw new Error("Argumnent 1: The type/key component name should be a string value and not ("+typeof t+").");return this.type=t,this}static form(t,e){let i=new v(t);return i.#t="form",i.setType("text"),i.setName(t),i.merge(e)}static view(t,e){if(typeof e!="object")throw new Error("Argumnent 2 (view object data): In StratoxItem.view is required and should be an object");let i=new v(t);return i.#t="view",i.setData(e),i.setName(t),i}static fromData(t,e){return new v(t).merge(e)}setContainer(t){if(!(t instanceof G))throw new Error("Must be an intsance of StratoxContainer");this.#e=t}getType(){return this.type}getName(){return this.name}getCompType(){return this.#t}setLabel(t){if(typeof t!="string"&&typeof t!="number")throw new Error("Argumnent 1: Is not a string or number");return this.label=t,this}setDescription(t){if(typeof t!="string"&&typeof t!="number")throw new Error("Argumnent 1: Is not a string or number");return this.description=t,this}setType(t){if(typeof t!="string"&&typeof t!="number")throw new Error("Argumnent 1: Is not a string or number");return this.type=t,this}setName(t){if(typeof t!="string"&&typeof t!="number")throw new Error("Argumnent 1: Is not a string or number");return this.name=t,this}setAttr(t){if(typeof t!="object")throw new Error("Argumnent 1: Is not a object");return this.attr=t,this}setConfig(t){if(typeof t!="object")throw new Error("Argumnent 1: Is not a object");return this.config=t,this}setFields(t){if(typeof t!="object")throw new Error("Argumnent 1: Is not a object");let e={};return f.each(t,function(i,n){n instanceof v?e[n.getName()]=n.get():e[i]=n}),this.fields=e,this}setItems(t){if(typeof t!="object")throw new Error("Argumnent 1: Is not a object");return this.items=t,this}setValue(t){if(typeof t!="string"&&typeof t!="number")throw new Error("Argumnent 1 is not a string or number");return this.value=t,this}setData(t){if(typeof t!="object")throw new Error("Argumnent 1: Is not a object");return this.data=t,this}set(t){return this.#t==="form"?typeof t=="function"?t(this):f.extend(this,t):typeof t=="function"?t(this.data):f.extend(this.data,t),this}getObj(){return{type:this.type,label:this.label,description:this.description,name:this.name,attr:this.attr,config:this.config,fields:this.fields,items:this.items,data:this.data,value:this.value}}merge(t){return f.extend(this,t),this}get(){let t=this.getObj();return f.extend(t,this.data),t}update(){this.#e&&this.#e.get("view").update()}};var V=class{#t="";#e;constructor(t){this.#t=t.toString(),this.#e=this.#t}static value(t){return new V(t)}get(){return this.#t.toString()}getRaw(){return this.#e}withRaw(){return new V(this.#e)}toString(){return this.#t}toUpper(){return this.#t=this.#t.toUpperCase(),this}toLower(){return this.#t=this.#t.toLowerCase(),this}ucfirst(){return this.#t=this.#t.charAt(0).toUpperCase()+this.#t.slice(1),this}stripTags(){return this.#t=this.#t.replace(/<[^>]*>/g,""),this}trim(){return this.#t.trim(),this}excerpt(t){return typeof t!="number"&&(t=30),t<this.#t.length&&(this.stripTags(),this.#t=this.#t.substr(0,t).trim()+"..."),this}htmlspecialchars(){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return this.#t=this.#t.replace(/[&<>"']/g,e=>t[e]),this}protect(){return this.htmlspecialchars(),this}xss(){return this.htmlspecialchars(),this}urlencode(){let t=encodeURIComponent(this.#t);return t.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+"),this.#t=t,this}urldecode(){return this.#t=decodeURIComponent(this.#t.replace(/\+/g," ")),this}sprint(){var t=arguments;return this.#t=this.#t.replace(/{(\d+)}/g,function(e,i){return typeof t[i]<"u"?t[i]:e}),this}String(){return String(this.#t)}};var ft,j,m,x,et,O,C,N,I,k,F,z,M,J,it,mt,nt,gt,A=class{constructor(t){u(this,nt);u(this,ft,void 0);u(this,j,void 0);u(this,m,{});u(this,x,{});u(this,et,{});u(this,O,[]);u(this,C,void 0);u(this,N,{});u(this,I,{});u(this,k,void 0);u(this,F,void 0);u(this,z,void 0);u(this,M,!1);typeof t=="string"&&d(this,C,f(t)),d(this,N,{}),d(this,F,new G),a(this,F).set("view",this)}static setConfigs(t){f.extend(a(this,J),t)}static prepareView(t,e){if(typeof e!="function")throw new Error("The argument 2 in @prepareView has to be a callable");D.setComponent(t,e,this)}static create(t,e,i){let n=w(this,it,mt).call(this,t),r=new A(n.elem);return r.view(n.name,e).setContainer(a(r,F)),r.execute(i),r}container(){return a(this,F)}view(t,e){let i=a(this,m)[t]&&a(this,m)[t].data?a(this,m)[t].data:{};return f.extend(i,e),a(this,I)[t]=w(this,nt,gt).call(this,t,i),a(this,I)[t]}withView(t,e,i){return A.create(t,e,i)}form(t,e){let i=a(this,m)[t]?a(this,m)[t]:{};return f.extend(i,e),a(this,I)[t]=v.form(t,e),a(this,I)[t]}read(){return a(this,m)}update(t,e){return t===void 0?(a(this,x).notify(),this):(t instanceof v?a(this,m)[t.getName()]=t:typeof e=="function"?e(a(this,m)[t]):a(this,m)[t]=e,a(this,x).set(a(this,m)),this)}hasView(){return typeof a(this,k)=="string"}getResponse(){return a(this,k)??""}eventOnload(t){setTimeout(t,1)}setValues(t){if(typeof t=="object")throw new Error("The argument 1 has to be an object");d(this,N,t)}add(t,e){return t instanceof v?a(this,m)[t.getName()]=t:a(this,m)[t]=e,this}getConfigs(t){return typeof t=="string"?a(A,J)[t]:a(A,J)}getElement(){return a(this,C)}getViewCount(){return A.viewCount}async build(t){let e=this,i="";d(this,j,new D(a(this,m),"view",this.getConfigs(),a(this,F))),a(this,j).setValues(a(this,N)),i=e.getConfigs("directory"),i.endsWith("/")||(i+="/");for(let[n,r]of Object.entries(a(this,m)))if(!a(e,j).hasComponent(r.type)){a(e,O).push(!1);let s=await import(i+n+".js");a(e,O)[a(e,O).length-1]=!0,a(e,et)[n]=!0,f.each(s,function(l,c){D.setComponent(n,c)})}a(e,O)[a(e,O).length-1]?typeof t=="function"&&t(a(e,j)):a(e,O).length===0&&a(e,j)&&typeof t=="function"&&t(a(e,j))}execute(t){let e=this;f.isEmptyObject(a(this,I))||f.each(a(this,I),function(i,n){e.add(n)}),d(this,x,new tt(a(this,m))),e.build(function(i){a(e,x).factory(function(n,r){A.viewCount++,d(e,k,i.get()),a(e,C)&&e.insertHtml()}),a(e,x).listener().notify(),d(e,M,!1),i.hasGroupEvents()&&a(e,C)&&(a(e,C).on("input",function(n){let r=f(n.target),s=r.data("name"),l=r.val();e.editFieldValue(s,r.val())}),a(e,C).on("click",".wa-field-group-btn",function(n){n.preventDefault();let r=f(this),s=r.data("name"),l=parseInt(r.data("position"));e.addGroupField(s,l,r.hasClass("after"))}),a(e,C).on("click",".wa-field-group-delete-btn",function(n){n.preventDefault();let r=f(this),s=r.data("name"),l=parseInt(r.data("position"));e.deleteGroupField(s,l,r.hasClass("after"))})),typeof t=="function"&&t.apply(e,[a(e,x)])})}modifyValue(t,e,i){let n=t;for(let s=0;s<e.length-1;s++){let l=e[s];(n[l]===void 0||typeof n[l]!="object")&&(n[l]={}),n=n[l]}let r=e[e.length-1];i(n,r)}observer(){return a(this,x)}addGroupField(t,e,i){let n=t.split(","),r=a(this,N);return i&&(e+=1),this.modifyValue(r,n,function(s,l){f.isArray(s[l])||(s[l]=Object.values(s[l])),s[l].splice(e,0,{})}),a(this,x).notify(),r}deleteGroupField(t,e){let i=t.split(","),n=a(this,N);return this.modifyValue(n,i,function(r,s){r[s].length>1&&r[s].splice(e,1)}),a(this,x).notify(),n}editFieldValue(t,e){let i=t.split(","),n=a(this,N);return this.modifyValue(n,i,function(r,s){r[s]=e}),n}insertHtml(){let t=this;t.getConfigs("popegation")===!1||!a(t,M)?(d(t,M,!0),a(t,C).html(a(t,k))):(a(t,z)!==void 0&&clearTimeout(a(t,z)),d(t,z,setTimeout(function(){d(t,M,!1),a(t,C).html(a(t,k))},0)))}format(t){return new V(t)}renderMustache(t,e){return t.replace(/{{(.*?)}}/g,function(i,n){return e[n.trim()]||""})}},g=A;ft=new WeakMap,j=new WeakMap,m=new WeakMap,x=new WeakMap,et=new WeakMap,O=new WeakMap,C=new WeakMap,N=new WeakMap,I=new WeakMap,k=new WeakMap,F=new WeakMap,z=new WeakMap,M=new WeakMap,J=new WeakMap,it=new WeakSet,mt=function(t){let e,i=null,n;if(typeof t=="object"){if(n=Object.keys(t),typeof n[0]!="string")throw new Error('Unrecognizable identifier type. Should be string (view name) or { viewName: "#element" }');e=n[0],i=t[e]??null}else if(typeof t=="string")e=t;else throw new Error('Unrecognizable identifier type. Should be string (view name) or { viewName: "#element" }');return{name:e,elem:i}},nt=new WeakSet,gt=function(t,e){let i=v.view(t,e);return i.setContainer(a(this,F)),i},u(g,it),ut(g,"viewCount",0),u(g,J,{xss:!0,directory:"",popegation:!0});function yt(o,t,e,i){let n=this,r={init:function(s){r.config={body:"body",id:"modal"},e.extend(r.config,s),r.data={},this.setup()},setup:function(){n.hasView()||(this.data.type=o?.type?.toString(),this.data.type||(this.data.type="message"),this.data.isOpener=this.data.type==="opener",this.data.body=e(this.config.body),this.data.body.addClass("overflow"),this.data.body.append(this.output.main()),this.data.modal=e("#"+this.config.id),this.data.modal.on("click",".btn",this.confirm),(this.data.type==="message"||this.data.type==="error")&&this.data.modal.click(function(s){s.preventDefault(),r.removeModal()}),e(document).on("keyup."+this.config.id,this.data.modal,this.keyup))},output:{main:function(){return`
				<div id="${r.config.id}" class="modal modal-${r.data.type} abs fixed z-50 scroll">
					<div class="flex justify-center items-center h-12">
						<div class="relative z-20 width-100 max-height-100 ${r.data.isOpener?"max-w-screen-md":"max-w-screen-xs"}">
							<div class="mod-holder ${r.data.isOpener?"":"align-center"} bg-white">
								${this.close()}
								<div class="card-2">
									<section class="${r.data.isOpener?"mb-30":"message"}">
										${o.headline?'<h2 class="headline-4 mt-0">'+o.headline+"</h2>":""}
										<p>${o.content}</p>
									</section>
									${this.aside()}
								</div>
							</div>
						</div>
						<div class="bg-black opacity-80 abs fixed z-10"></div>
					</div>
				</div>
				`},close:function(){return`
				<a class="btn close cancel abs top right z-20 p-15" href="#">
					<svg class="close" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M10.243 1.757l-8.486 8.486m0-8.486l8.486 8.486" stroke="currentColor" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/></svg>
				</a>
				`},aside:function(){let s="";switch(i.groupFactory(function(l,c){s+=l}),o?.type){case"confirm":s+=`
						<aside class="modal-buttons mt items gap-x-10">
							<a class="button v3 btn bg-secondary cancel" href="#">Avbryt</a>
							<a class="button v3 btn bg-primary confirm" href="#">Bekr\xE4fta</a>
						</aside>
						`;break;case"ok":s+=`
						<aside class="modal-buttons mt items gap-x-10">
							<a class="button v3 btn bg-primary confirm" href="#">Ok</a>
						</aside>
						`;break}return s}},removeModal:function(){this.data.modal.remove(),this.data.body.removeClass("overflow")},confirm:function(s){s.preventDefault(),e(this).hasClass("confirm")&&t.has("confirm")&&t.get("confirm"),r.removeModal()},keyup:function(s){s.which===27&&o?.type==="opener"&&(s.preventDefault(),r.removeModal())}};r.init({body:"body",id:"modal_"+this.getViewCount()})}var h={init:function(o){return h.config={lang:"sv",template:{xss:!1,directory:"../../jviews/"},phrases:{0:"An unexpected error has occurred",204:"204 The document is empty",400:"400 The server understood the request but the content was invalid",401:"401 Unauthorized",403:"403 Forbidden",404:"404 The page could not be found",414:"414 Request-URI Too Long",500:"500 Internal Server Error, try agin later",503:"503 Service Unavailable"},request:{error:function(t,e){f("#loading").css("display","none"),h.responseError(t,e),h.getResponder()},complete:function(t,e,i){f("#loading").css("display","none"),f.extend(CONFIG,t),h.getResponder()}},responder:{isReady:!1,ready:function(t){},update:function(t){}}},f.extend(h.config,o),h.data={views:{},form:{form:{},data:{}}},g.setConfigs(h.config.template),this},setup:function(){h.getResponder(),f(".domer-get-btn").click(function(o){o.preventDefault(),h.resetConfigViews();let t=f(this),e=t.data("href"),i=t.data("config");h.ajax({url:e})}),f(document).on("submit",function(o){o.preventDefault();let t=f(this),e=t.closest("form");h.data.form.form=e,h.data.form.data=new FormData(e.get(0)),h.resetConfigViews(),h.ajax({url:e.attr("action"),method:e.attr("method"),body:new URLSearchParams(h.data.form.data)})}),h.config.responder.ready(CONFIG),h.config.responder.isReady=!0,typeof window._deferLoad=="function"&&window._deferLoad(h)},resetConfigViews:function(){CONFIG.values={},CONFIG.views={}},getResponder:function(){if(typeof CONFIG.views=="object"&&f.each(CONFIG.views,function(t,e){let i=""+e.type+(e.element??"");h.data.views[i]=new g(e.element??null);let n=h.data.views[i].view(e.type,e.data);f.isArray(e?.part?.data)&&e.part.data.length>0&&f.each(e.part.data,function(r,s){f.each(s,function(l,c){h.data.views[i].view(l,c)})}),console.log(h.data.views[i]),typeof e?.part?.fields=="object"&&!f.isEmptyObject(e.part.fields)&&n.setFields(e.part.fields),h.data.views[i].hasView()?h.data.views[i].update():h.data.views[i].execute()}),typeof CONFIG.csrfToken=="string"&&f(".inp-csrf-token").val(CONFIG.csrfToken),CONFIG.status)switch(parseInt(CONFIG.status)){case 1:g.create("modal",{headline:CONFIG.headline??null,content:CONFIG.message});break;case 2:g.create("modal",{type:"error",headline:CONFIG.headline??null,content:CONFIG.message});break;case 3:CONFIG.error&&CONFIG.error.form&&f.each(CONFIG.error.form,function(t,e){let i={},n=h?.data?.form?.form?.length>0?h.data.form.form.find('[name="'+t+'"]'):f('[name="'+t+'"]');n.get(0)!==void 0?(i=n.parent(),i.addClass("error"),i.find(".message").text(e.message)):console.error("Could not find form field ("+t+") in DOM."),n.on("focus.removeErrorInpClass",function(){i.removeClass("error"),n.off("focus.removeErrorInpClass")})});break;case 4:CONFIG.redirect?window.location=CONFIG.redirect.replace(/^\s+|\s+$/g,""):location.reload();break;case 5:var o="ok";CONFIG.type==="confirm"&&(o=CONFIG.type),g.create("modal",{type:o,headline:CONFIG.headline??null,content:CONFIG.message}).container().set("confirm",function(){CONFIG.redirect?window.location=CONFIG.redirect.replace(/^\s+|\s+$/g,""):location.reload()});break;default:break}h.config.responder.isReady&&h.config.responder.update(CONFIG)},getView:function(o,t){let e,i=""+o+(t??"");return(e=h.data.views?.[i])&&e instanceof g?e:!1},responseError:function(o,t){if(t!==200){let e=h.config.phrases[t]?h.config.phrases[t]:h.config.phrases[0];f.extend(CONFIG,{status:2,message:e})}else f.extend(CONFIG,o)},ajax:function(o,t,e){let i={dataType:"json",statusCode:h.config.phrases};return f.extend(i,o),f.ajax(i).fail(function(n,r){r&&n.message?h.message("error",n.message):h.message("error","An unexpected error has occurred. Try again later. Contacts us if the error persists."),typeof e=="function"&&t.call(this,n)}).done(function(n,r,s){f.extend(CONFIG,n),h.getResponder(),typeof t=="function"&&t.call(this,n)})},message:function(o,t){return g.create("modal",{type:o==="error"?o:"message",content:t})}};h.init({lang:"sv",template:{xss:!1,directory:"../../public/jviews/"},phrases:{0:"An unexpected error has occurred",204:"204 The document is empty",400:"400 The server understood the request but the content was invalid",401:"401 Unauthorized",403:"403 Forbidden",404:"404 The page could not be found",414:"414 Request-URI Too Long",500:"500 Internal Server Error, try agin later",503:"503 Service Unavailable"},responder:{ready:function(o){g.prepareView("modal",yt)},update:function(o){}}});f(document).ready(h.setup);})();
//# sourceMappingURL=main.js.map
